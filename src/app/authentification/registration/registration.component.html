<div>
  <form [formGroup]="regForm" novalidate (ngSubmit)="register()" >
    <h2>Регистрация</h2>
    <div class="register" >
      <div class="regUsernameLabel">
        <label for="username"><b>Логин</b></label>
      </div>
      <div [ngClass]="{'regUsernameDefault': regForm.controls['username'].untouched,
                         'regUsernameInvalid': regForm.controls['username'].invalid
                                            && (regForm.controls['username'].dirty
                                            || regForm.controls['username'].touched),
                         'regUsernameValid': regForm.controls['username'].touched
                                            && regForm.controls['username'].valid }" >
        <input type="text" id="username" placeholder="Введите логин"
               [(ngModel)]="user.username"  formControlName="username" >
        <div class="regUsernameErrorMassage">
          <div *ngIf="regForm.controls['username'].invalid
                && (regForm.controls['username'].dirty
                || regForm.controls['username'].touched)" >
            <div *ngIf="regForm.controls['username'].errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="regForm.controls['username'].errors.pattern">
              <p>Логин должен содержать только кириллические, или латинские буквы, либо цифры!</p>
            </div>
          </div>
        </div>
      </div>

      <div class="regPasswordLabel">
        <label for="password"><b>Пароль</b></label>
      </div>
      <div [ngClass]="{'regPasswordDefault': regForm.controls['password'].untouched,
                       'regPasswordInvalid': regForm.controls['password'].invalid
                                           && (regForm.controls['password'].dirty
                                           || regForm.controls['password'].touched),
                       'regPasswordValid': regForm.controls['password'].touched
                                           && regForm.controls['password'].valid }" >
        <input type="text" id="password" placeholder="Введите имя"
               [(ngModel)]="user.password"  formControlName="password" >
        <div class="regPasswordErrorMassage">
          <div *ngIf="regForm.controls['password'].invalid
              && (regForm.controls['password'].dirty
              || regForm.controls['password'].touched)" >
            <div *ngIf="regForm.controls['password'].errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="regForm.controls['password'].errors.minlength">
              <p>Пароль должен содержать минимум 6 символов!</p>
            </div>
          </div>
        </div>
      </div>

      <div class="regConfirmPasswordLabel">
        <label for="confirmPassword"><b>Пароль</b></label>
      </div>
      <div [ngClass]="{'regConfirmPasswordDefault': regForm.controls['confirmPassword'].untouched,
                       'regConfirmPasswordInvalid': regForm.controls['confirmPassword'].touched ,
                       'regConfirmPasswordValid': regForm.controls['confirmPassword'].touched
                                           && regForm.controls['confirmPassword'].valid }" >
        <input type="text" id="confirmPassword" placeholder="Введите имя"
               [(ngModel)]="user.confirmPassword"  formControlName="confirmPassword" >
        <div class="regConfirmPasswordErrorMassage">
          <div *ngIf="regForm.controls['confirmPassword'].invalid
              && (regForm.controls['confirmPassword'].dirty
              || regForm.controls['confirmPassword'].touched)" >
            <div *ngIf="regForm.controls['confirmPassword'].errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="regForm.controls['confirmPassword'].errors.notEqual">
              <p>Пароли не совпадают!</p>
            </div>
          </div>
        </div>
      </div>


      <div class="regBirthDateLabel">
        <label ><b>Дата рождения</b></label>
      </div>
      <div [ngClass]=" {'regBirthDateDefault': regForm.controls['day' && 'month' && 'year'].untouched,
                        'regBirthDateInvalid': ((regForm.controls['day' && 'month' && 'year'].invalid
                                              && regForm.controls['day' && 'month' && 'year'].touched)
                                              ||(regForm.controls['day' && 'month' && 'year'].invalid
                                              && !regForm.controls['day' && 'month' && 'year'].touched
                                              && submitted)),
                        'regBirthDateValid': regForm.controls['day' && 'month' && 'year'].valid }" >
        <select formControlName="day" >
          <option hidden [ngValue]="null"><p>День</p></option>
          <option *ngFor="let day of days" [value]="day" >
           {{day}}
          </option>
        </select>

        <select formControlName="month"  >
          <option hidden [ngValue]="null"><p>Месяц</p></option>
          <option *ngFor="let month of months" [value]="month.name" >
            {{month.name}}
          </option>
        </select>
        <select  formControlName="year" >
          <option hidden [ngValue]="null"><p>Год</p></option>
          <option *ngFor="let year of years"  [value]="year">
            {{year}}
          </option>
        </select>
      </div>
      <div class="regDateErrorMassage">
        <div *ngIf="((regForm.controls['day' && 'month' && 'year'].invalid
                      && regForm.controls['day' && 'month' && 'year'].touched)
                      ||(regForm.controls['day' && 'month' && 'year'].invalid
                      && !regForm.controls['day' && 'month' && 'year'].touched
                      && submitted))" >
          <div *ngIf="regForm.controls['day' && 'month' && 'year'].errors.required">
            <p>Укажите дату!</p>
          </div>
        </div>
      </div>

      <div class="regGenderLabel">
          <label ><b>Пол</b></label>
      </div>
      <div [ngClass]=" {'regGenderGroup': regForm.controls['gender'].untouched,
                        'regGenderGroupInvalid': ((regForm.controls['gender'].invalid
                                              && regForm.controls['gender'].touched)
                                              ||(regForm.controls['gender'].invalid
                                              && !regForm.controls['gender'].touched
                                              && submitted))
                                                              }" >
          <input type="radio" id="male" value="male" formControlName="gender" [(ngModel)]="user.gender" >
          <label  for="male">Мужской</label>
          <input type="radio" id="female" value="female" formControlName="gender" [(ngModel)]="user.gender" >
          <label  for="female">Женский</label>
      </div>
      <div class="regGenderErrorMassage">
        <div *ngIf="((regForm.controls['gender'].invalid && submitted))" >
          <div *ngIf="regForm.controls['gender'].errors.required">
            <p>Укажите пол!</p>
          </div>
        </div>
      </div>
      <button type="submit">Обновить</button>
    </div>
  </form>
</div>
<div *ngIf="regForm.valid && submitted">
  {{user| json}}

  us:{{user.roles}}
</div>
