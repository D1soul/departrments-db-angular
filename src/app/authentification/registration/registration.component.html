<div>
  <form [formGroup]="regForm" novalidate (ngSubmit)="register()" >
    <h2>Регистрация</h2>
    <div class="register" >
      <div class="regUsernameLabel">
        <label for="username"><b>Логин</b></label>
      </div>
      <div [ngClass]="{'regUsernameDefault': this.regForm.get('username').untouched,
                         'regUsernameInvalid': this.regForm.get('username').invalid
                                            && (this.regForm.get('username').dirty
                                            || this.regForm.get('username').touched),
                         'regUsernameValid': this.regForm.get('username').touched
                                            && this.regForm.get('username').valid }" >
        <input type="text" id="username" placeholder="Введите логин"
               [(ngModel)]="user.username"  formControlName="username" >
        <div class="regUsernameErrorMassage">
          <div *ngIf="this.regForm.get('username').invalid
                && (this.regForm.get('username').dirty
                || this.regForm.get('username').touched)" >
            <div *ngIf="this.regForm.get('username').errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="this.regForm.get('username').errors.pattern">
              <p>Логин должен содержать только кириллические, или латинские буквы, либо цифры!</p>
            </div>
            <div *ngIf="this.regForm.get('username').errors">
              <p>{{errorMessage}}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="regPasswordLabel">
        <label for="password"><b>Пароль</b></label>
      </div>
      <div [ngClass]="{'regPasswordDefault': regForm.get('password').untouched,
                       'regPasswordInvalid': regForm.get('password').invalid
                                           && (regForm.get('password').dirty
                                           || regForm.get('password').touched),
                       'regPasswordValid': regForm.get('password').touched
                                           && regForm.get('password').valid }" >
        <input type="text" id="password" placeholder="Введите имя"
               [(ngModel)]="user.password"  formControlName="password" >
        <div class="regPasswordErrorMassage">
          <div *ngIf="regForm.get('password').invalid
              && (regForm.get('password').dirty
              || regForm.get('password').touched)" >
            <div *ngIf="regForm.get('password').errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="regForm.get('password').errors.minlength">
              <p>Пароль должен содержать минимум 6 символов!</p>
            </div>
          </div>
        </div>
      </div>

      <div class="regConfirmPasswordLabel">
        <label for="confirmPassword"><b>Пароль</b></label>
      </div>
      <div [ngClass]="{'regConfirmPasswordDefault': regForm.get('confirmPassword').untouched,
                       'regConfirmPasswordInvalid': regForm.get('confirmPassword').touched ,
                       'regConfirmPasswordValid': regForm.get('confirmPassword').touched
                                           && regForm.get('confirmPassword').valid }" >
        <input type="text" id="confirmPassword" placeholder="Введите имя"
               [(ngModel)]="user.confirmPassword"  formControlName="confirmPassword" >
        <div class="regConfirmPasswordErrorMassage">
          <div *ngIf="regForm.get('confirmPassword').invalid
              && (regForm.get('confirmPassword').dirty
              || regForm.get('confirmPassword').touched)" >
            <div *ngIf="regForm.get('confirmPassword').errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="regForm.get('confirmPassword').errors.notEqual">
              <p>Пароли не совпадают!</p>
            </div>
          </div>
        </div>
      </div>


      <div class="regBirthDateLabel">
        <label ><b>Дата рождения</b></label>
      </div>
      <div [ngClass]=" {'regBirthDateDefault': regForm.controls['day' && 'month' && 'year'].untouched,
                        'regBirthDateInvalid': ((regForm.controls['day' && 'month' && 'year'].invalid
                                              && regForm.controls['day' && 'month' && 'year'].touched)
                                              ||(regForm.controls['day' && 'month' && 'year'].invalid
                                              && !regForm.controls['day' && 'month' && 'year'].touched
                                              && submitted)),
                        'regBirthDateValid': regForm.controls['day' && 'month' && 'year'].valid }" >
        <select formControlName="day" >
          <option hidden [value]="null">День</option>
          <option *ngFor="let day of days" [value]="day" >
           {{day}}
          </option>
        </select>

        <select formControlName="month" >
          <option hidden [value]="null">Месяц</option>
          <option *ngFor="let month of months" [value]="month.name" >
            {{month.name}}
          </option>
        </select>
        <select  formControlName="year" >
          <option hidden [value]="null">Год</option>
          <option *ngFor="let year of years"  [value]="year">
            {{year}}
          </option>
        </select>
      </div>
      <div class="regDateErrorMassage">
        <div *ngIf="((regForm.controls['day' && 'month' && 'year'].invalid
                      && regForm.controls['day' && 'month' && 'year'].touched)
                      ||(regForm.controls['day' && 'month' && 'year'].invalid
                      && !regForm.controls['day' && 'month' && 'year'].touched
                      && submitted))" >
          <div *ngIf="regForm.controls['day' && 'month' && 'year'].errors.required">
            <p>Укажите дату!</p>
          </div>
        </div>
      </div>

      <div class="regGenderLabel">
          <label ><b>Пол</b></label>
      </div>
      <div [ngClass]=" {'regGenderGroup': regForm.controls['gender'].untouched,
                        'regGenderGroupInvalid': ((regForm.controls['gender'].invalid
                                              && regForm.controls['gender'].touched)
                                              ||(regForm.controls['gender'].invalid
                                              && !regForm.controls['gender'].touched
                                              && submitted))
                                                              }" >
          <input type="radio" id="male" value="male" formControlName="gender" [(ngModel)]="user.gender" >
          <label  for="male">Мужской</label>
          <input type="radio" id="female" value="female" formControlName="gender" [(ngModel)]="user.gender" >
          <label  for="female">Женский</label>
      </div>
      <div class="regGenderErrorMassage">
        <div *ngIf="((regForm.controls['gender'].invalid && submitted))" >
          <div *ngIf="regForm.controls['gender'].errors.required">
            <p>Укажите пол!</p>
          </div>
        </div>
      </div>
      <button type="submit">Обновить</button>
    </div>
  </form>
</div>
<div *ngIf="regForm.valid && submitted">
  {{user| json}}

  us:{{user.roles}}
</div>
<div>
  error:{{errorMessage}}

  errord:  {{regForm.get('username').errors| json}}
</div>
