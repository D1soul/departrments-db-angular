<div>
  <form [formGroup]="updUserForm" novalidate (ngSubmit)="updateUser()" >
    <h2>Редактирование данных подотдела</h2>
    <div *ngIf="user">
    <div class="register" >
      <div class="regUsernameLabel">
        <label for="username"><b>Логин</b></label>
      </div>
      <div [ngClass]="{'regUsernameDefault': updUserForm.get('username').untouched,
                         'regUsernameInvalid': updUserForm.get('username').invalid
                                            && (updUserForm.get('username').dirty
                                            || updUserForm.get('username').touched),
                         'regUsernameValid': updUserForm.get('username').touched
                                            && updUserForm.get('username').valid }" >
        <input type="text" id="username" placeholder="Введите логин"
               [(ngModel)]="user.username"  formControlName="username" >
        <div class="regUsernameErrorMassage">
          <div *ngIf="updUserForm.get('username').invalid
                && (updUserForm.get('username').dirty
                || updUserForm.get('username').touched)" >
            <div *ngIf="updUserForm.get('username').errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="updUserForm.get('username').errors.pattern">
              <p>Логин должен содержать только кириллические, или латинские буквы, либо цифры!</p>
            </div>
          </div>
        </div>
      </div>


    <button type="button" (click)="initPasswordForm()">Изменить пароль</button>
    <div *ngIf="changePassword">
      <div class="updPasswordLabel">
        <label for="password"><b>Пароль</b></label>
      </div>
      <div [ngClass]="{'updPasswordDefault': updUserForm.get('password').untouched,
                       'updPasswordInvalid':updUserForm.get('password').invalid
                                           && (updUserForm.get('password').dirty
                                           || updUserForm.get('password').touched),
                       'updPasswordValid': updUserForm.get('password').touched
                                           && updUserForm.get('password').valid }" >
        <input type="text" id="password" placeholder="Введите имя" formControlName="password" >
        <div class="updPasswordErrorMassage">
          <div *ngIf="updUserForm.get('password').invalid
              && (updUserForm.get('password').dirty
              || updUserForm.get('password').touched)" >
            <div *ngIf="updUserForm.get('password').errors.notFound">
              <p>{{errorMessage}}</p>
            </div>
            <div *ngIf="updUserForm.get('password').errors.minlength">
              <p>Пароль должен содержать минимум 6 символов!</p>
            </div>
          </div>
        </div>
      </div>


      <div class="updNewPasswordLabel">
        <label for="newPassword"><b>Пароль</b></label>
      </div>
      <div [ngClass]="{'updNewPasswordDefault':updUserForm.get('newPassword').untouched,
                       'updNewPasswordInvalid': updUserForm.get('newPassword').invalid
                                           && (updUserForm.get('newPassword').dirty
                                           || updUserForm.get('newPassword').touched),
                       'updNewPasswordValid': updUserForm.get('newPassword').touched
                                           && updUserForm.get('newPassword').valid }" >
        <input type="text" id="newPassword" placeholder="Введите имя"
                formControlName="newPassword" >
        <div class="updNewPasswordErrorMassage">
          <div *ngIf="updUserForm.get('newPassword').invalid
              && (updUserForm.get('newPassword').dirty
              || updUserForm.get('newPassword').touched)" >
            <div *ngIf="updUserForm.get('newPassword').errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="updUserForm.get('newPassword').errors.minlength">
              <p>Пароль должен содержать минимум 6 символов!</p>
            </div>
          </div>
        </div>
      </div>

       <div class="updConfirmPasswordLabel">
        <label for="confirmPassword"><b>Пароль</b></label>
      </div>
      <div [ngClass]="{'updConfirmPasswordDefault': updUserForm.get('confirmPassword').untouched,
                       'updConfirmPasswordInvalid': updUserForm.get('confirmPassword').touched ,
                       'updConfirmPasswordValid': updUserForm.get('confirmPassword').touched
                                           && updUserForm.get('confirmPassword').valid }" >
        <input type="text" id="confirmPassword" placeholder="Введите имя"  formControlName="confirmPassword" >
        <div class="updConfirmPasswordErrorMassage">
          <div *ngIf="updUserForm.get('confirmPassword').invalid
              && (updUserForm.get('confirmPassword').dirty
              || updUserForm.get('confirmPassword').touched)" >
            <div *ngIf="updUserForm.get('confirmPassword').errors.required">
              <p>Поле не должно быть пустым!</p>
            </div>
            <div *ngIf="updUserForm.get('confirmPassword').errors.notEqual">
              <p>Пароли не совпадают!</p>
            </div>
          </div>
        </div>
      </div>
      <button type="button" (click)="setNewPassword()">Сохранить</button>
     </div>



      <div class="updBirthDateLabel">
        <label ><b>Дата рождения</b></label>
      </div>
      <div [ngClass]=" {'updBirthDateDefault': updUserForm.controls['day' && 'month' && 'year'].untouched,
                        'updBirthDateInvalid': ((updUserForm.controls['day' && 'month' && 'year'].invalid
                                              && updUserForm.controls['day' && 'month' && 'year'].touched)
                                              ||(updUserForm.controls['day' && 'month' && 'year'].invalid
                                              && !updUserForm.controls['day' && 'month' && 'year'].touched
                                              && submitted)),
                        'updBirthDateValid': updUserForm.controls['day' && 'month' && 'year'].valid }" >
        <select formControlName="day" >
          <option *ngFor="let day of days" [value]="day">
            {{day}}
          </option>
        </select>

        <select formControlName="month" >
          <option *ngFor="let month of months" [value]="month.name">
            {{month.name}}
          </option>
        </select>
        <select  formControlName="year" >
          <option *ngFor="let year of years" [value]="year">
            {{year}}
          </option>
        </select>
      </div>
      <div class="updDateErrorMassage">
        <div *ngIf="((updUserForm.controls['day' && 'month' && 'year'].invalid
                      && updUserForm.controls['day' && 'month' && 'year'].touched)
                      ||(updUserForm.controls['day' && 'month' && 'year'].invalid
                      && !updUserForm.controls['day' && 'month' && 'year'].touched
                      && submitted))" >
          <div *ngIf="updUserForm.controls['day' && 'month' && 'year'].errors.required">
            <p>Укажите дату!</p>
          </div>
        </div>
      </div>

      <div class="regGenderLabel">
        <label ><b>Пол</b></label>
      </div>
      <div [ngClass]=" {'regGenderGroup': updUserForm.get('gender').untouched,
                        'regGenderGroupInvalid': ((updUserForm.get('gender').invalid
                                              && updUserForm.get('gender').touched)
                                              ||(updUserForm.get('gender').invalid
                                              && !updUserForm.get('gender').touched
                                              && submitted))
                                                              }" >
        <input type="radio" id="male" value="male" formControlName="gender" [(ngModel)]="user.gender" >
        <label  for="male">Мужской</label>
        <input type="radio" id="female" value="female" formControlName="gender" [(ngModel)]="user.gender" >
        <label  for="female">Женский</label>
      </div>
      <div class="regGenderErrorMassage">
        <div *ngIf="((updUserForm.get('gender').invalid && submitted))" >
          <div *ngIf="updUserForm.get('gender').errors.required">
            <p>Укажите пол!</p>
          </div>
        </div>
      </div>
      <button type="submit">Обновить</button>
    </div>
    </div>
  </form>
</div>
 <!--   <div>
      {{currentUser.username| json}}
    </div>
-->
